# SSH into your EC2 instance at 13.221.145.77 and run these commands:

# 1. Install Docker
sudo yum update -y
sudo yum install -y docker aws-cli
sudo service docker start

# 2. Login to ECR (using EC2 IAM role)
aws ecr get-login-password --region us-east-1 | sudo docker login --username AWS --password-stdin 337909762852.dkr.ecr.us-east-1.amazonaws.com

# 3. Run the backend
sudo docker run -d \
  --name vantagepoint-backend \
  --restart always \
  -p 80:8080 \
  -e DATABASE_HOST=vantagepoint-production.c6ds4c4qok1n.us-east-1.rds.amazonaws.com \
  -e DATABASE_PASSWORD="VantagePoint2024!" \
  -e JWT_SECRET="VantagePoint2024!SecretKey" \
  337909762852.dkr.ecr.us-east-1.amazonaws.com/vantagepoint-backend:v2

# 4. Create admin user
curl -X POST http://localhost/api/v1/setup/create-admin \
  -H "Content-Type: application/json" \
  -d '{"username":"admin","password":"VantagePoint2024!","email":"admin@vantagepointcrm.com"}'

# Check if it's running:
sudo docker ps
